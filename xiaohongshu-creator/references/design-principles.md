# 设计原则详细说明

本文档详细说明小红书创作工作流的核心设计原则和架构决策。

---

## 📋 目录

- [Progressive Disclosure原则](#progressive-disclosure原则)
- [账号风格隔离原则](#账号风格隔离原则)
- [子Skill封装原则](#子skill封装原则)
- [用户确认机制原则](#用户确认机制原则)
- [一切主题转向投资原则](#一切主题转向投资原则)
- [专业化与软广平衡原则](#专业化与软广平衡原则)

---

## Progressive Disclosure原则

### 定义

**Progressive Disclosure（渐进式披露）**是指按照信息需求的重要性，分层级加载内容的设计原则。

### 三层加载架构

```
Layer 1: Frontmatter (元数据)
├─ 始终在context中
├─ 约100 tokens
└─ 决定skill何时被触发

Layer 2: SKILL.md Body (主体)
├─ skill触发时加载
├─ 约4k-5k tokens，400-500行
└─ 核心工作流程和快速索引

Layer 3: References (参考资料)
├─ 按需加载
├─ 无限制tokens
└─ 详细执行指南和配置
```

### 在本工作流中的应用

#### SKILL.md结构（450行）

```markdown
1. 任务目标（20行）
   └─ 核心目标说明，不展开细节

2. 核心工作流（40行）
   └─ Phase流程图，不包含详细步骤

3. Phase快速指南（210行，每个Phase 30行）
   ├─ Phase 0: 模式判断（30行）
   │  ├─ 任务：判断模式
   │  ├─ 判断逻辑：输入长度
   │  └─ 详细指南：见 references/phase-guides.md#phase-0
   ├─ Phase 0.5: 账号选择（30行）
   │  ├─ 任务：选择账号风格
   │  ├─ 可用账号：6个快速对比表
   │  └─ 详细配置：见 references/account-styles-config.md
   ├─ Phase 1: 初稿创作（40行）
   │  ├─ 任务：创作初稿
   │  ├─ 使用skill：content-creation-framework
   │  └─ 详细指南：见 references/phase-guides.md#phase-1
   └─ ...

4. 资源索引（50行）
   └─ 所有references文件的快速索引

5. 执行FAQ（30行）
   └─ 常见问题的快速解答
```

#### References文件结构

```
references/
├── phase-guides.md              # Phase详细执行指南
│   ├── Phase 0详细说明
│   ├── Phase 0.5详细说明
│   ├── Phase 1详细说明
│   └── ...（所有Phase）
├── account-styles-config.md     # 账号风格配置索引
├── account-styles/              # 账号风格详细配置
│   ├── zhukan-toujiao.md
│   ├── dingdingmao.md
│   └── ...
├── investment-pivot-guide.md    # 投资转向指南
├── phase3-multi-image-guide.md  # 多页图像指南
├── faq.md                       # 常见问题详细解答
├── examples.md                  # 完整使用示例
└── sub-skills.md                # 子skill详细说明
```

### 优势

1. **减少Context占用**
   - Phase 0执行时：只加载Phase 0相关内容（~2k tokens）
   - Phase 2执行时：只加载Phase 2相关内容（~5k tokens）
   - 平均减少75%的无效加载

2. **提升AIGC遵循性**
   - 核心指令清晰，无冗余信息干扰
   - 详细说明按需加载，不稀释关键指令
   - 降低指令遗漏风险

3. **提高可维护性**
   - 修改实施细节只需改references文件
   - SKILL.md作为稳定的核心流程定义
   - 降低维护风险和成本

4. **支持扩展**
   - 新增Phase只需在phase-guides.md添加
   - SKILL.md只增加30行索引
   - 支持10+个Phase而SKILL.md仍保持<500行

### 对比：优化前后

| 维度 | 优化前 | 优化后 | 改善 |
|------|--------|--------|------|
| SKILL.md行数 | 1,134 | ~450 | ↓60% |
| Context占用 | 23k-31k tokens | 5k-8k tokens | ↓75% |
| Phase执行时加载 | 31k tokens | 2k-8k tokens | ↓75-90% |
| 添加新Phase成本 | +150行 | +30行 | ↓80% |

---

## 账号风格隔离原则

### 定义

**账号风格隔离**是指将不同账号的风格配置完全独立管理，通过配置文件动态加载的设计原则。

### 架构设计

```
┌─────────────────────────────────────┐
│   Phase 0.5: 账号风格选择            │
│   用户选择账号风格                   │
└─────────────────────────────────────┘
           ↓
┌─────────────────────────────────────┐
│   读取账号风格配置文件               │
│   references/account-styles/        │
│   <账号名>.md                       │
└─────────────────────────────────────┘
           ↓
┌─────────────────────────────────────┐
│   应用账号风格                       │
│   ├─ 语言风格                       │
│   ├─ 内容结构                       │
│   ├─ 结尾模板                       │
│   └─ 固定标签                       │
└─────────────────────────────────────┘
```

### 配置文件结构

每个账号风格配置文件包含：

```markdown
# 账号名称 - 风格配置

**账号定位**：<账号定位>

## 风格定义
- 核心风格
- 思维模式
- 读者定位
- 互动模式

## 核心特征
- 恒定特征
- 重要特征
- 可选特征

## 语言风格
- 常用表达
- 句式特点

## 内容结构
- 通用结构模式
- 进展节奏

## 内容要求
- 篇幅标准
- 每页内容要求

## 账号专属元素
- 标识信息
- 引流方式
- 结尾推广模板
```

### 优势

1. **完全隔离**
   - 每个账号风格独立配置
   - 修改一个账号不影响其他账号
   - 添加新账号只需添加新配置文件

2. **动态加载**
   - Phase 2执行时才加载选定账号的配置
   - 不加载其他5个账号的配置
   - 减少context占用

3. **易于扩展**
   - 添加新账号风格：
     1. 创建 `account-styles/新账号.md`
     2. 在 `account-styles-config.md` 添加索引
     3. 在 Phase 0.5 添加选项
   - 不需要修改核心工作流

4. **易于维护**
   - 修改账号风格只需编辑对应配置文件
   - 不影响其他账号
   - 不影响主工作流

### 当前支持的账号风格

1. **小红书主号-投教笔记**（zhukan-toujiao）
   - 官方账号，理财教育导向
   - 亲切口语化风格

2. **小红书主号-广告笔记**（zhukan-guanggao）
   - 官方账号，开户推广导向
   - 利益吸引式风格

3. **叮叮猫的财经笔记**（dingdingmao）
   - KOS账号，金融知识科普
   - 小白友好的口语化风格

4. **证券人排雷哥笔记**（peileige）
   - KOS账号，系统化知识科普
   - 固定结尾模式

5. **申万宏源乐乐笔记**（lele）
   - KOS账号，热点驱动型科普
   - 快节奏风格

6. **仿中金公众号文风**（zhongjin-fengge）
   - 公众号风格，理性分析
   - 数据支撑风格

---

## 子Skill封装原则

### 定义

**子Skill封装**是指将复杂的专业功能封装为独立skill，通过skill名称动态调用的设计原则。

### 架构设计

```
┌─────────────────────────────────────┐
│   主工作流（SKILL.md）              │
│   协调各个Phase的执行               │
│   不包含详细实施细节                │
└─────────────────────────────────────┘
           ↓
┌─────────────────────────────────────┐
│   子Skill调用（通过skill名称）      │
│   ├─ content-creation-framework    │
│   ├─ xiaohongshu-finance-writer    │
│   ├─ baoyu-xhs-images              │
│   └─ xiaohongshu-viral-analyzer    │
└─────────────────────────────────────┘
           ↓
┌─────────────────────────────────────┐
│   子Skill独立执行                   │
│   完成专业任务                      │
│   返回结果给主工作流                │
└─────────────────────────────────────┘
```

### 4个子Skill的职责

#### 1. content-creation-framework（内容创作框架）

**职责**：提供通用的内容创作方法论

**使用时机**：Phase 1

**核心功能**：
- 需求理解与重构
- 选题讨论
- 结构化设计
- 内容创作
- 质量检查

**集成位置**：`skills/content-creation-framework/`

#### 2. xiaohongshu-finance-writer（小红书财经笔记改写）

**职责**：将内容改写为小红书笔记格式

**使用时机**：Phase 2

**核心功能**：
- 读取账号风格配置
- 应用对应风格的语言、结构、模板
- 生成小红书笔记稿（标题+笔记图+正文）

**集成位置**：`skills/xiaohongshu-finance-writer/`

#### 3. baoyu-xhs-images（小红书图文生成器）

**职责**：生成小红书图文系列

**使用时机**：Phase 3

**核心功能**：
- 10种视觉风格
- 8种布局方式
- 3种内容策略
- 偏好设置（EXTEND.md）

**集成位置**：`skills/baoyu-xhs-images/`

#### 4. xiaohongshu-viral-analyzer（爆款分析器）

**职责**：评估笔记爆款潜力

**使用时机**：Phase 2.5

**核心功能**：
- 四维结构评分
- 优化建议生成

**集成位置**：`skills/xiaohongshu-viral-analyzer/`

### 优势

1. **模块化**
   - 每个子skill独立开发和维护
   - 可以独立升级和优化
   - 不影响主工作流

2. **可复用**
   - 子skill可在其他工作流中复用
   - 例如：content-creation-framework可用于其他创作场景

3. **专业性**
   - 每个子skill专注一个专业领域
   - 封装专业知识和最佳实践
   - 提供专业级输出

4. **可测试**
   - 每个子skill可独立测试
   - 确保功能正确性
   - 降低整体测试复杂度

### 调用机制

**通过skill名称自动调用**：

```markdown
使用 `content-creation-framework` skill
→ 自动查找 skills/ 或 ~/.claude/skills/
→ 找到 content-creation-framework/SKILL.md
→ 加载并执行
```

**路径配置**：见 `references/sub-skills-config.md`

---

## 用户确认机制原则

### 定义

**用户确认机制**是指在关键节点设置确认点，让用户审核并确认后再继续的设计原则。

### 5个确认点

```
Phase 0 (模式判断)
    ↓
Phase 0.5 (账号选择)
    ↓
✋ 确认点 0.5: 确认账号风格
    ↓
Phase 1 (初稿创作/改写)
    ↓
✋ 确认点 1: 确认初稿
    ↓
【改写模式】润色选择
    ↓
Phase 1.5 (润色，可选)
    ↓
✋ 确认点 1.5: 确认润色结果
    ↓
Phase 2 (小红书改写)
    ↓
✋ 确认点 2: 确认小红书笔记稿
    ↓
Phase 2.5 (爆款评分)
    ↓
✋ 确认点 2.5: 选择是否优化
    ↓
Phase 3 (信息图生成)
    ↓
✋ 确认点 3: 确认信息图
    ↓
最终输出
```

### 确认点设计

每个确认点包含：

1. **展示内容**
   - 当前Phase的完整结果预览
   - 关键信息高亮

2. **检查清单**
   - 需要检查的要点
   - 质量标准

3. **用户选择**
   - 是否满意并继续
   - 需要修改的选项
   - 修改的具体方向

4. **等待确认**
   - 必须等待用户回复
   - 不得跳过确认点

### 优势

1. **质量控制**
   - 每个关键节点都有质量检查
   - 用户全程参与创作过程
   - 降低AI幻觉风险

2. **灵活性**
   - 用户可以在确认点提出修改
   - 可以回溯到之前的Phase
   - 可以调整方向

3. **透明度**
   - 用户知道每个阶段的输出
   - 可以控制创作方向
   - 增强信任感

4. **用户体验**
   - 渐进式展示结果
   - 不会一次性展示过多信息
   - 降低认知负担

---

## 一切主题转向投资原则

### 定义

**一切主题转向投资**是指从任何生活/热点话题自然过渡到投资理财，实现软性营销的设计原则。

### 核心理念

```
任何话题
    ↓
找到与投资理财的连接点
    ↓
自然过渡
    ↓
提供投资理财知识价值
    ↓
软性引导开户/咨询
```

### 5种通用转向模板

详见 `references/investment-pivot-guide.md`

1. **理财观念转向**
   - 从消费观念转向理财观念
   - 适用：购物、消费、生活方式类话题

2. **财务安全转向**
   - 从风险管理角度切入投资
   - 适用：职场、收入、生活规划类话题

3. **机会成本转向**
   - 从成本收益角度分析
   - 适用：教育、投资、决策类话题

4. **资产配置转向**
   - 从资源配置角度展开
   - 适用：宏观经济、市场趋势类话题

5. **财富增长转向**
   - 从财富积累角度引导
   - 适用：创业、副业、收入增长类话题

### 软性引导技巧

1. **从用户话题切入**
   - 先聊用户关心的话题
   - 建立共鸣和信任

2. **找到连接点**
   - 用类比或案例找到连接点
   - "就像...一样"的类比句式

3. **自然过渡**
   - 用过渡句连接
   - "说到这个，其实..." "这让我想到..."

4. **提供知识价值**
   - 给出实用的理财知识
   - 不是纯广告

5. **软性引导**
   - "如果你想深入学习..." "想要了解更多..."
   - 而非"快来开户"硬广

### 成功标准

- ✅ 转向自然，不生硬
- ✅ 有知识价值，不是硬广
- ✅ 用户能够接受并产生兴趣
- ✅ 最终引导到申万宏源开户/咨询

---

## 专业化与软广平衡原则

### 定义

**专业化与软广平衡**是指体现申万宏源作为专业券商的专业性，同时避免过度营销的设计原则。

### 专业性的体现

1. **内容专业性**
   - 准确的金融术语
   - 可靠的数据支撑
   - 深入的市场分析
   - 完整的风险提示

2. **表达专业性**
   - 避免过度口语化（官方账号）
   - 使用行业标准表达
   - 减少网络流行语（官方账号）

3. **服务专业性**
   - 申万宏源作为老牌券商
   - 专业的投顾服务
   - 完善的业务体系

### 软广的技巧

1. **知识优先**
   - 先提供有价值的知识
   - 建立专业信任
   - 再自然引导到服务

2. **权益引导**
   - 展示真实的新客权益
   - 8.18%理财、Level-2、投顾服务
   - 用利益吸引，而非用话术忽悠

3. **行动引导**
   - "私信领取资料包"
   - "了解更多知识"
   - "来申万宏源学习"
   - 而非"快来开户"

4. **风险提示**
   - 必须包含完整的风险提示
   - 不夸大收益
   - 不保证回报

### 不同账号的平衡

**官方账号（主号投教/主号广告）**：
- 专业性：⭐⭐⭐⭐⭐
- 软广度：⭐⭐⭐☆☆
- 平衡：体现专业券商形象，适度推广

**KOS账号（叮叮猫/排雷哥/乐乐）**：
- 专业性：⭐⭐⭐☆☆
- 软广度：⭐⭐⭐⭐☆
- 平衡：知识科普为主，软性引导

**公众号风格（中金风）**：
- 专业性：⭐⭐⭐⭐⭐
- 软广度：⭐⭐☆☆☆
- 平衡：深度分析，理性引导

---

## 架构总结

### 核心设计原则

1. **Progressive Disclosure**
   - 分层加载，按需提供信息
   - 减少context占用
   - 提升AIGC遵循性

2. **账号风格隔离**
   - 配置文件独立管理
   - 动态加载选定账号
   - 易于扩展和维护

3. **子Skill封装**
   - 专业功能模块化
   - 通过名称调用
   - 可独立维护和测试

4. **用户确认机制**
   - 5个关键确认点
   - 质量控制和灵活性
   - 降低AI幻觉风险

5. **一切主题转向投资**
   - 从任何话题自然过渡
   - 提供知识价值
   - 软性引导开户/咨询

6. **专业化与软广平衡**
   - 体现专业性
   - 避免过度营销
   - 建立长期信任

### 技术架构

```
┌─────────────────────────────────────┐
│   Frontmatter (~100 tokens)          │
│   决定skill何时被触发                │
└─────────────────────────────────────┘
           ↓
┌─────────────────────────────────────┐
│   SKILL.md (~5k tokens, 450行)     │
│   ├─ 任务目标                        │
│   ├─ 核心工作流                      │
│   ├─ Phase快速指南（每个30行）       │
│   ├─ 资源索引                        │
│   └─ 执行FAQ                         │
└─────────────────────────────────────┘
           ↓ 按需加载
┌─────────────────────────────────────┐
│   References (按需加载)              │
│   ├─ phase-guides.md                │
│   ├─ account-styles-config.md       │
│   ├─ account-styles/*.md            │
│   ├─ investment-pivot-guide.md      │
│   ├─ phase3-multi-image-guide.md    │
│   ├─ faq.md                         │
│   └─ examples.md                    │
└─────────────────────────────────────┘
           ↓ skill调用
┌─────────────────────────────────────┐
│   子Skills (独立封装)                │
│   ├─ content-creation-framework    │
│   ├─ xiaohongshu-finance-writer    │
│   ├─ baoyu-xhs-images              │
│   └─ xiaohongshu-viral-analyzer    │
└─────────────────────────────────────┘
```

### 可扩展性

**新增账号风格**：
1. 创建 `account-styles/新账号.md`
2. 在 `account-styles-config.md` 添加索引
3. 在 Phase 0.5 添加选项
**成本**：约15分钟

**新增Phase**：
1. 在 `phase-guides.md` 添加详细说明
2. 在 SKILL.md 添加30行快速索引
**成本**：约30分钟

**新增子skill**：
1. 开发独立skill
2. 在主工作流中调用
3. 在 `sub-skills-config.md` 添加配置
**成本**：视复杂度而定

---

**遵循这些设计原则，可以确保工作流的高效、可维护、可扩展，同时提供优秀的用户体验和专业的输出质量。**
